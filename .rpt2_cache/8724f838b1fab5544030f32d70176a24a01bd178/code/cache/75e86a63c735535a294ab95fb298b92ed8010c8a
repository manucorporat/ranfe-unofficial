{"code":"import * as tslib_1 from \"tslib\";\r\nimport { http } from './http';\r\nvar WeatherService = /** @class */ (function () {\r\n    function WeatherService(apiKey) {\r\n        this.apiKey = apiKey;\r\n    }\r\n    WeatherService.prototype.request = function (query) {\r\n        var url = \"http://apidev.accuweather.com/\" + query + \"&apiKey=\" + this.apiKey;\r\n        return http.GET(url).then(function (response) {\r\n            if (response.length === 0) {\r\n                throw new Error('not found');\r\n            }\r\n            else {\r\n                return response[0];\r\n            }\r\n        });\r\n    };\r\n    WeatherService.prototype.resolveCity = function (cityName) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n            var city;\r\n            return tslib_1.__generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.request(\"locations/v1/search?q=\" + cityName)];\r\n                    case 1:\r\n                        city = _a.sent();\r\n                        return [2 /*return*/, city.Key];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    WeatherService.prototype.resolveForecast = function (key) {\r\n        return this.request(\"currentconditions/v1/\" + key + \".json?language=es\");\r\n    };\r\n    WeatherService.prototype.todayForecast = function (city) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n            var key;\r\n            return tslib_1.__generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.resolveCity(city)];\r\n                    case 1:\r\n                        key = _a.sent();\r\n                        return [2 /*return*/, this.resolveForecast(key)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return WeatherService;\r\n}());\r\nexport { WeatherService };\r\nexport var weather = new WeatherService('hoArfRosT1215');\r\n//# sourceMappingURL=weather.js.map","map":{"version":3,"file":"weather.js","sourceRoot":"","sources":["../src/js/weather.ts"],"names":[],"mappings":";AAAA,OAAO,EAAE,IAAI,EAAE,MAAM,QAAQ,CAAC;AAW9B;IAEE,wBACU,MAAc;QAAd,WAAM,GAAN,MAAM,CAAQ;IACpB,CAAC;IAIG,gCAAO,GAAf,UAAgB,KAAa;QAC3B,IAAM,GAAG,GAAG,mCAAiC,KAAK,gBAAW,IAAI,CAAC,MAAQ,CAAC;QAC3E,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,UAAC,QAAQ;YACjC,EAAE,CAAC,CAAC,QAAQ,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;gBAC1B,MAAM,IAAI,KAAK,CAAC,WAAW,CAAC,CAAC;YAC/B,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;YACrB,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAEa,oCAAW,GAAzB,UAA0B,QAAgB;;;;;4BAC3B,qBAAM,IAAI,CAAC,OAAO,CAAC,2BAAyB,QAAU,CAAC,EAAA;;wBAA9D,IAAI,GAAG,SAAuD;wBACpE,sBAAO,IAAI,CAAC,GAAG,EAAC;;;;KACjB;IAEO,wCAAe,GAAvB,UAAwB,GAAW;QACjC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,0BAAwB,GAAG,sBAAmB,CAAC,CAAC;IACtE,CAAC;IAEK,sCAAa,GAAnB,UAAoB,IAAY;;;;;4BAClB,qBAAM,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAA;;wBAAlC,GAAG,GAAG,SAA4B;wBACxC,sBAAO,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,EAAC;;;;KAClC;IACH,qBAAC;AAAD,CAAC,AAhCD,IAgCC;;AAED,MAAM,CAAC,IAAM,OAAO,GAAG,IAAI,cAAc,CAAC,eAAe,CAAC,CAAC"}}
